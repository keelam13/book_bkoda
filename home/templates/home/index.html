{% extends 'base.html' %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
<article class="text-white mt-3">
    <div class="overlay"></div>
    <h1 class="welcome">Book your trip now!</h1>
    <div class="container mt-3">
        <div class="row">
            <section class="col-md-6 mt-2">
                <h2 class="hide">CTA</h2>
                <div class="text-center welcome-message">
                    {% if user.is_authenticated %}
                    <p class="lead">Hello, <strong>{{ user.username }}</strong>!</p>
                    {% else %}
                    <p class="lead">Please <a class="links" href="{% url 'account_login' %}"><strong>login</strong></a> to access more features.</p>
                    {% endif %}
                </div>
                <div class="instructions-box">
                    <p class="instruction-group">
                        * To reserve seats you must be logged in, but if you still don't have an account please
                        <span><a href="{% url 'account_signup' %}"><strong>signup</strong></a></span>.
                        However, if you only want to see the trips for the day, you may search for trips without logging in.
                        Search trips by entering origin or where you're coming from and your desired destination,
                        the date of your travel, and then clicking the search button. A list of trips will then be displayed
                        according to the origin, destination and date you provided. A reserve button is placed at the end of
                        each trip. You may reserve seats for up to 30 days in advance.
                        <br>
                        Note: As of now BKODA only offers trips from Kabayan, Benguet to Baguio City and vice versa.
                    </p>
                </div>
            </section>
            <section class="col-md-6 mt-2 form-group">
                <h2 class="mb-2 text-center">Search Trips</h2>
                {% if form %}
                    <p>Form is available in template!</p>
                {% else %}
                    <p>ERROR: Form is NOT available in template!</p>
                {% endif %}
                <form action="{% url 'trips' %}" method="GET">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="{{ form.origin.id_for_label }}" class="form-label">From</label>
                        {{ form.origin }}
                        {% if form.origin.errors %}
                            <div class="text-danger small">{{ form.origin.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.destination.id_for_label }}" class="form-label">To</label>
                        {{ form.destination }}
                        {% if form.destination.errors %}
                            <div class="text-danger small">{{ form.destination.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.date.id_for_label }}" class="form-label">Date</label>
                        {{ form.date }}

                        {% if form.date.errors %}
                            <div class="text-danger small">{{ form.date.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.num_travelers.id_for_label }}" class="form-label">Passengers</label>
                        {{ form.num_travelers }}
                        {% if form.num_travelers.errors %}
                            <div class="text-danger small">{{ form.num_travelers.errors }}</div>
                        {% endif %}
                    </div>

                    {# Hidden fields for other form management if any #}
                    {% for hidden_field in form.hidden_fields %}
                        {{ hidden_field }}
                    {% endfor %}

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">Let's Go!</button>
                    </div>
                </form>
            </section>
        </div>
    </div>
</article>
{% endblock %}